<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ìˆ˜í•˜ë¬¼ ê²€ì‚¬ í”„ë¡œê·¸ë¨ (ëª¨ë°”ì¼ ëª©ì—…)</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8fafc; }
        .container { max-width: 400px; margin-top: 40px; }
        .logo { font-size: 2rem; font-weight: bold; color: #0d6efd; margin-bottom: 20px; }
        .result-box { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px #0001; padding: 20px; margin-top: 20px; }
        .btn-main { width: 100%; font-size: 1.1rem; }
        .warning { color: #dc3545; font-weight: bold; }
        .info { color: #0d6efd; font-weight: bold; }
        .loading-spinner { display: none; margin-top: 15px; }
    </style>
</head>
<body>
<div class="container">
    <div class="text-center logo">ìˆ˜í•˜ë¬¼ ê²€ì‚¬ í”„ë¡œê·¸ë¨</div>
    <form id="checkForm">
        <div class="mb-3">
            <input type="text" class="form-control" id="itemInput" placeholder="ë¬¼í’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”" required>
        </div>
        <button type="submit" class="btn btn-primary btn-main">ê²€ì‚¬í•˜ê¸°</button>
    </form>
    <button class="btn btn-outline-secondary btn-main mt-2" data-bs-toggle="modal" data-bs-target="#prohibitedModal">ê¸ˆì§€ë¬¼í’ˆ ëª©ë¡ ë³´ê¸°</button>
    
    <div class="loading-spinner text-center" id="loadingSpinner">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <div class="mt-2 text-primary">AI ë¶„ì„ ì¤‘...</div>
    </div>

    <div id="resultBox" class="result-box d-none">
        <div class="fw-bold mb-2" id="statusMessage"></div>
        <div id="resultText" class="text-muted small"></div>
    </div>
</div>

<!-- ê¸ˆì§€ë¬¼í’ˆ ëª©ë¡ ëª¨ë‹¬ -->
<div class="modal fade" id="prohibitedModal" tabindex="-1" aria-labelledby="prohibitedModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="prohibitedModalLabel">ê¸ˆì§€ë¬¼í’ˆ ëª©ë¡</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul id="prohibitedList"></ul>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
const GEMINI_API_URL = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent";
const GEMINI_API_KEY = "ì‚¬ìš©ìì˜ APIí‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”"; // ì‚¬ìš©ìë‹˜ì˜ Gemini API í‚¤

const PROHIBITED_ITEMS = [
    "ë¬¼ì´", "ê°€ìœ„", "ì¹¼", "ìŠ¤ìœ„ìŠ¤ êµ°ìš©ì¹¼", "ì´", "í™”ì•½", "í­ë°œë¬¼",
    "í™”í•™ì•½í’ˆ", "ì—¼ì‚°", "ê³¼ì‚°í™”ìˆ˜ì†Œ", "ì•„ì„¸í†¤", "ë²¤ì  ",
    "ê°€ìŠ¤ë ˆì¸ì§€", "ë¼ì´í„°", "ì„±ëƒ¥", "ìŠ¤í”„ë ˆì´", "ì••ì¶•ê°€ìŠ¤",
    "ìœ„ì¡°í™”í", "ìœ„ì¡°ì±„ê¶Œ", "ìœ„ì¡°ì€í–‰ê¶Œ", "ì›í™”í‘œì‹œì—¬í–‰ììˆ˜í‘œ",
    "ì—¬í–‰ììˆ˜í‘œ", "ì‹¤ë¬¼ì¦ê¶Œ", "ìê¸°ì•ìˆ˜í‘œ", "ë‹¹ì¢Œìˆ˜í‘œ", "ìš°í¸í™˜",
    "ê·€ê¸ˆì†", "ê³¨ë“œë°”", "ì´ê¸°", "ë„ê²€", "í™”ì•½", "ë¬´ê¸°",
    "í­ë°œë¬¼", "ìœ ë…ì„±ë¬¼ì§ˆ", "í­ì£½", "ì‹ì¹¼", "ì‹ë„", "ê³¼ë„", "ë‚˜ì´í”„",
    "ì¹¼", "ì»¤í„°ì¹¼", "ëˆˆì¹ì¹¼", "ë§¥ê°€ì´ë²„ì¹¼", "ìŠ¤ìœ„ìŠ¤ì¹¼",
    "ê³µêµ¬", "ë§ì¹˜", "ë Œì¹˜", "ê°€ìœ„", "ë©´ë„ê¸°", "ë§ˆì•½", "ë©¸ì¢…ìœ„ê¸°ì¢…",
    "ì•¼ìƒë™ë¬¼", "í˜¸ë‘ì´", "í‘œë²”", "ì½”ë¼ë¦¬", "íƒ€ì¡°", "ë§¤",
    "ì˜¬ë¹¼ë¯¸", "ì½”ë¸Œë¼", "ê±°ë¶", "ì•…ì–´", "ì² ê°‘ìƒì–´", "ì‚°í˜¸", "ë‚œ",
    "ì„ ì¸ì¥", "ì•Œë¡œì—", "ë°•ì œ", "ëª¨í”¼", "ëª¨í”¼í•¸ë“œë°±", "ëª¨í”¼ê°€ë°©",
    "ëª¨í”¼ì§€ê°‘", "ìƒì•„", "ìƒì•„íŒ”ì°Œ", "ìƒì•„ëª©ê±¸ì´", "ë™ë¬¼í•œì•½", "ì›…ë‹´",
    "ì‚¬í–¥", "ì‹ë¬¼í•œì•½", "ëª©í–¥", "êµ¬ì²™", "ì²œë§ˆ", "ì‹ë¬¼", "ê³¼ì¼",
    "ì±„ì†Œ", "ì•¼ì±„", "ë†ë¦¼ì‚°ë¬¼ë¥˜", "ë¬¸í™”ì¬", "ë¬¸í™”ìœ ì‚°", "ìœ í˜•ë¬¸í™”ìœ ì‚°",
    "ë¬¼", "ì•¡ì²´", "ì„¸ë©´ìš©í’ˆ", "ì¹˜ì•½", "ìƒ´í‘¸", "ë¬¼ì•½", "ì•½", "ìˆ ",
    "ì•½ì£¼", "ìŒë£Œìˆ˜", "ë¡œì…˜", "í•¸ë“œí¬ë¦¼", "í† ë„ˆ", "íŒŒìš´ë°ì´ì…˜", "ìŠ¤í‚¨",
    "ì—ì„¼ìŠ¤", "ì„¸ëŸ¼", "ìˆ˜ë¶„í¬ë¦¼", "ì„ í¬ë¦¼", "ë©”ì´í¬ì—…ë² ì´ìŠ¤", "ë¦½ê¸€ë¡œìŠ¤",
    "ë¦½ì˜¤ì¼", "ì»¨ì‹¤ëŸ¬", "BBí¬ë¦¼", "CCí¬ë¦¼", "ë¯¸ìŠ¤íŠ¸", "ë©”ì´í¬ì—…í”½ì„œ",
    "í´ë Œì§•ì˜¤ì¼", "í´ë Œì§•ë°¤", "í´ë Œì§•í¼", "ì„¸ì•ˆì œ", "í´ë Œì§•ì›Œí„°", "ë¦¬ë¬´ë²„",
    "ë„¤ì¼ë¦¬ë¬´ë²„", "ë§¤ë‹ˆíì–´", "í¼í“¸", "í–¥ìˆ˜", "í—¤ì–´ì—ì„¼ìŠ¤", "ìŠ¤í”„ë ˆì´",
    "í—¤ì–´ìŠ¤í”„ë ˆì´", "ì‚°ì†ŒìŠ¤í”„ë ˆì´", "í•´ì¶©ê¸°í”¼ì œ", "í˜¸ì‹ ìš©ìŠ¤í”„ë ˆì´", "ì—í”„í‚¬ë¼",
    "ì‚´ì¶©ì œ", "ê³ ì¶”ì¥", "ê¹€ì¹˜", "ìŒì‹ë¬¼", "ì•„ì´ìŠ¤íŒ©", "ëŒ€í˜•ë¼ì´í„°", "ì „ê¸°ë¼ì´í„°", "í† ì¹˜"
];

// ê¸ˆì§€ë¬¼í’ˆ ëª©ë¡ì„ ëª¨ë‹¬ì— í‘œì‹œ
const prohibitedListUl = document.getElementById('prohibitedList');
PROHIBITED_ITEMS.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    prohibitedListUl.appendChild(li);
});

const form = document.getElementById('checkForm');
const resultBox = document.getElementById('resultBox');
const statusMessage = document.getElementById('statusMessage');
const resultText = document.getElementById('resultText');
const loadingSpinner = document.getElementById('loadingSpinner');

form.addEventListener('submit', async function(e) {
    e.preventDefault();
    const item = document.getElementById('itemInput').value.trim();
    if (!item) return;

    resultBox.classList.add('d-none');
    loadingSpinner.style.display = 'block'; // ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ

    try {
        const prompt = `ë‹¹ì‹ ì€ í•­ê³µì„œë¹„ìŠ¤ ë¶„ì•¼ì˜ ì „ë¬¸ê°€ì´ì ìˆ˜í•˜ë¬¼ ê²€ì‚¬ê´€ì…ë‹ˆë‹¤.\nì•„ë˜ëŠ” í•­ê³µê¸° ê¸°ë‚´ ë°˜ì… ê¸ˆì§€ ë¬¼í’ˆ ëª©ë¡ì…ë‹ˆë‹¤:\n${PROHIBITED_ITEMS.join(', ')}\n\në‹¤ìŒ ë¬¼í’ˆì´ í•­ê³µê¸° ê¸°ë‚´ ë°˜ì…ì´ ê¸ˆì§€ëœ ë¬¼í’ˆì¸ì§€ ì•„ë‹Œì§€ ëª…í™•í•˜ê²Œ íŒë‹¨í•˜ì—¬ ë‹µë³€í•´ì£¼ì„¸ìš”.\në§Œì•½ ê¸ˆì§€ëœ ë¬¼í’ˆì´ë¼ë©´ ë‹µë³€ ì‹œì‘ ë¶€ë¶„ì— ë°˜ë“œì‹œ '[ê¸ˆì§€] 'ë¼ê³  í‘œì‹œí•˜ê³ , ê·¸ ì´ìœ ì™€ ê´€ë ¨ ê·œì •(êµ­ì œí•­ê³µìš´ì†¡í˜‘íšŒ, IATA ê¸°ì¤€ ë“±)ì„ í•œêµ­ì–´ë¡œ ê³µì‹ì ì´ê³  ì¹œì ˆí•˜ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.\në§Œì•½ ê¸ˆì§€ë˜ì§€ ì•Šì€ ë¬¼í’ˆì´ë¼ë©´ ë‹µë³€ ì‹œì‘ ë¶€ë¶„ì— ë°˜ë“œì‹œ '[ê°€ëŠ¥] 'ë¼ê³  í‘œì‹œí•˜ê³ , ê°„ëµí•˜ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.\në¬¼í’ˆ: ${item}`;

        const response = await fetch(`${GEMINI_API_URL}?key=${GEMINI_API_KEY}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                contents: [{
                    parts: [{
                        text: prompt
                    }]
                }]
            })
        });

        if (!response.ok) {
            const errorData = await response.json();
            throw new Error(`API ì˜¤ë¥˜: ${response.status} ${response.statusText} - ${errorData.error?.message || JSON.stringify(errorData)}`);
        }

        const result = await response.json();
        const aiResponse = result.candidates[0].content.parts[0].text;
        
        let isProhibited = false;
        if (aiResponse.startsWith('[ê¸ˆì§€]')) {
            isProhibited = true;
        }

        statusMessage.classList.remove('warning', 'info');

        if (isProhibited) {
            statusMessage.textContent = `ğŸ”” ê²½ê³ : '${item}'ì€(ëŠ”) ê¸°ë‚´ ìˆ˜í•˜ë¬¼ë¡œ ë°˜ì…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.`;
            statusMessage.classList.add('warning');
            resultText.innerHTML = `[AI ìƒì„¸ ë¶„ì„ ê²°ê³¼]<br/>${aiResponse.replace('[ê¸ˆì§€]', '').trim()}`; // íƒœê·¸ ì œê±° í›„ í‘œì‹œ
        } else {
            statusMessage.textContent = `âœ… ì•ˆë‚´: '${item}'ì€(ëŠ”) ê¸°ë‚´ ìˆ˜í•˜ë¬¼ë¡œ ë°˜ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.`;
            statusMessage.classList.add('info');
            resultText.innerHTML = `[AI ìƒì„¸ ë¶„ì„ ê²°ê³¼]<br/>${aiResponse.replace('[ê°€ëŠ¥]', '').trim()}`; // íƒœê·¸ ì œê±° í›„ í‘œì‹œ
        }

    } catch (error) {
        statusMessage.classList.remove('warning', 'info');
        statusMessage.textContent = `âŒ ì˜¤ë¥˜: ë¬¼í’ˆ ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`;
        statusMessage.classList.add('warning');
        resultText.innerHTML = `[ì˜¤ë¥˜ ìƒì„¸]<br/>${error.message || error}`; 
    } finally {
        loadingSpinner.style.display = 'none'; // ë¡œë”© ìŠ¤í”¼ë„ˆ ìˆ¨ê¹€
        resultBox.classList.remove('d-none');
    }
});
</script>
</body>
</html> 
