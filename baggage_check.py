import requests

API_KEY = "AIzaSyD2NBMydOQw_GOepdRtksFaPdHSdg1dYok"

# 상세 안내가 필요한 물품 및 해당 안내 메시지를 담는 딕셔너리
# 키: 물품 이름
# 값: 해당 물품에 대한 안내 메시지
ITEM_GUIDE_MAP = {
    "위조 화폐": "휴대반입 할 경우 몰수되며, 세관의 정밀검사 및 조사를 받은 후 범죄혐의가 있을 경우에는 관세법위반으로 처벌될 수 있습니다.",
    "위조 채권": "휴대반입 할 경우 몰수되며, 세관의 정밀검사 및 조사를 받은 후 범죄혐의가 있을 경우에는 관세법위반으로 처벌될 수 있습니다.",
    "위조 은행권": "휴대반입 할 경우 몰수되며, 세관의 정밀검사 및 조사를 받은 후 범죄혐의가 있을 경우에는 관세법위반으로 처벌될 수 있습니다.",
    "원화": "미화 1만 달러 이하(약 1400만 원) 상당액은 가능합니다.",
    "원화표시여행자수표": "미화 1만 달러 이하(약 1400만 원) 상당액은 가능합니다.",
    "여행자수표": "미화 1만 달러 이하(약 1400만 원) 상당액은 가능합니다.",
    "실물증권": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "자기앞수표": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "당좌수표": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "우편환": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "귀금속": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "골드바": "일상적으로 사용하는 반지, 목걸이 등은 반입 가능합니다.",
    "총기": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "도검": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "화약": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "무기": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "폭발물": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "유독성물질": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "폭죽": "경찰청장 허가 필요(총포, 도검, 화약류 등 단속법 제9조)",
    "식칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "식도": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "과도": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "나이프": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "커터칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "눈썹칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "맥가이버칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "스위스칼": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "공구": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "망치": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "렌치": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "가위": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "면도기": "둥근 날을 가진 버터칼, 안전날이 포함된 면도기, 안전면도날, 전기면도기는 휴대 반입 가능합니다.",
    "마약": "보건복지부장관 허가 필요(대마관리법 제4조, 마약법 제6조,향정신성의약품관리법 제3조)",
    "멸종위기종": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)", # 구체적 안내 없음
    "야생동물": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "호랑이": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "표범": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "코끼리": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "타조": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "매": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "올빼미": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "코브라": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "거북": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "악어": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "철갑상어": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "산호": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "난": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "선인장": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "알로에": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "박제": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "모피": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "모피 핸드백": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "모피 가방": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "모피 지갑": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "상아": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "상아팔찌": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "상아목걸이": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "동물한약": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "웅담": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "사향": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "식물한약": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "목향": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "구척": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "천마": "별도의 구체적인 지침이 필요합니다. (해당 품목은 반입 불가로 간주하는 것이 안전)",
    "식물": "농림축산검역본부장의 식물검사합격증 필요(식물방역법 제11조)",
    "과일": "농림축산검역본부장의 식물검사합격증 필요(식물방역법 제11조)",
    "채소": "농림축산검역본부장의 식물검사합격증 필요(식물방역법 제11조)",
    "야채": "농림축산검역본부장의 식물검사합격증 필요(식물방역법 제11조)",
    "농림산물류": "농림축산검역본부장의 식물검사합격증 필요(식물방역법 제11조)",
    "문화재": "문화재청장의 국외반출허가증/비문화재 확인증 필요",
    "문화유산": "문화재청장의 국외반출허가증/비문화재 확인증 필요",
    "유형문화유산": "문화재청장의 국외반출허가증/비문화재 확인증 필요",
    "물": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "액체": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "세면용품": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "치약": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "샴푸": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "물약": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "약": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "술": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "약주": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "음료수": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "로션": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "핸드크림": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "토너": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "파운데이션": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "스킨": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "에센스": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "세럼": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "수분크림": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "선크림": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "메이크업 베이스": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "립글로스": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "립오일": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "컨실러": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "BB크림": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "CC크림": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "미스트": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "메이크업픽서": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "클렌징오일": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "클렌징밤": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "클렌징폼": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "세안제": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "클렌징워터": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "리무버": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "네일리무버": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "매니큐어": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "퍼퓸": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "향수": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "헤어에센스": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우에만 휴대 반입 가능합니다.",
    "스프레이": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "헤어스프레이": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "산소스프레이": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "해충기피제": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "호신용스프레이": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "에프킬라": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "살충제": "인화성이 없는 스프레이류는 총2kg(2L) 범위 내에서 1개당 500g(500ml) 이하로만 위탁수하물로 반입 가능합니다.",
    "고추장": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우 휴대 반입 가능합니다.",
    "김치": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우 휴대 반입 가능합니다.",
    "음식물": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우 휴대 반입 가능합니다.",
    "아이스팩": "액체가 담긴 100㎖이하의 용기가 1L이하의 투명 비닐봉투에 담기고 입구를 닫아 밀봉이 된 경우 휴대 반입 가능합니다.",
    "리튬이온배터리": "용량 100Wh 이하의 경우 1인당 5개까지 객실 반입가능하며, 6개 이상은 항공사 승인이 필요합니다. 단락방지를 위하여 배터리 전극부분을 절연처리해야 합니다.",
    "보조배터리": "용량 100Wh 이하의 경우 1인당 5개까지 객실 반입가능하며, 6개 이상은 항공사 승인이 필요합니다. 단락방지를 위하여 배터리 전극부분을 절연처리해야 합니다.",
    "배터리": "용량 100Wh 이하의 경우 1인당 5개까지 객실 반입가능하며, 6개 이상은 항공사 승인이 필요합니다. 단락방지를 위하여 배터리 전극부분을 절연처리해야 합니다.",
    "밧데리": "용량 100Wh 이하의 경우 1인당 5개까지 객실 반입가능하며, 6개 이상은 항공사 승인이 필요합니다. 단락방지를 위하여 배터리 전극부분을 절연처리해야 합니다.",
    "라이터": "라이터는 1인당 1개로 제한됩니다.",
    "성냥": "라이터는 1인당 1개로 제한됩니다.",
    "대형라이터": "기내 반입이 불가능하며, 위탁 수하물로도 반입이 제한됩니다.", # 명시된 지침 없음. 일반적인 규정으로 간주
    "전기라이터": "기내 반입이 불가능하며, 위탁 수하물로도 반입이 제한됩니다.", # 명시된 지침 없음. 일반적인 규정으로 간주
    "토치": "기내 반입이 불가능하며, 위탁 수하물로도 반입이 제한됩니다.", # 명시된 지침 없음. 일반적인 규정으로 간주
    "컴퓨터": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "데스크탑": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "노트북": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "랩탑": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "태블릿": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "폰": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "스마트폰": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "핸드폰": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "스마트워치": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "애플워치": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "아이패드": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "카메라": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "캠코더": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "웨어러블": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "고데기": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "매직기": "배터리가 내장된 전자제품은 반드시 휴대하고 반입해야 합니다. 전기 코드를 연결해야 작동하는 전자제품은 모두 가능합니다.",
    "전자담배": "반드시 휴대하고 반입해야 합니다.",
    "등산용스틱": "기내 반입이 가능하나, 끝이 날카로울 경우 제한을 받을 수 있으니 위탁 반입을 권장합니다.",
    "등산스틱": "기내 반입이 가능하나, 끝이 날카로울 경우 제한을 받을 수 있으니 위탁 반입을 권장합니다.",
    "삼각대": "기내 반입이 가능하나, 끝이 날카로울 경우 제한을 받을 수 있으니 위탁 반입을 권장합니다.",
    "셀카봉": "기내 반입이 가능하나, 끝이 날카로울 경우 제한을 받을 수 있으니 위탁 반입을 권장합니다.",
    "트라이포드": "기내 반입이 가능하나, 끝이 날카로울 경우 제한을 받을 수 있으니 위탁 반입을 권장합니다."
}

PROHIBITED_ITEMS = list(set([
    "물총", "가스레인지", "스프레이", "압축가스", # 스프레이류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "화학약품", "염산", "과산화수소", "아세톤", "벤젠",
    "폭죽", # 총기류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "식칼", "식도", "과도", "나이프", "칼", "커터칼", "눈썹칼", "맥가이버칼", "스위스칼",
    "공구", "망치", "렌치", "가위", "면도기", # 위 칼/공구류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "마약", "멸종위기종", "야생동물", "호랑이", "표범", "코끼리", "타조", "매", "올빼미", "코브라", "거북", "악어", "철갑상어", "산호", "난", "선인장", "알로에", "박제", "모피", "모피 핸드백", "모피 가방", "모피 지갑", "상아", "상아팔찌", "상아목걸이", "동물한약", "웅담", "사향", "식물한약", "목향", "구척", "천마", # 멸종위기종 및 동식물/한약류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "식물", "과일", "채소", "야채", "농림산물류", # 식물/과일/채소류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "문화재", "문화유산", "유형문화유산", # 문화재류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "물", "액체", "세면용품", "치약", "샴푸", "물약", "약", "술", "약주", "음료수", "로션", "핸드크림", "토너", "파운데이션", "스킨", "에센스", "세럼", "수분크림", "선크림", "메이크업 베이스", "립글로스", "립오일", "컨실러", "BB크림", "CC크림", "미스트", "메이크업픽서", "클렌징오일", "클렌징밤", "클렌징폼", "세안제", "클렌징워터", "리무버", "네일리무버", "매니큐어", "퍼퓸", "향수", "헤어에센스", # 액체/화장품류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "헤어스프레이", "산소스프레이", "해충기피제", "호신용스프레이", "에프킬라", "살충제", # 스프레이류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "고추장", "김치", "음식물", "아이스팩", # 음식물/아이스팩류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "대형라이터", "전기라이터", "토치", # 라이터/토치류는 ITEM_GUIDE_MAP에 상세 규정 있음
    "위조화폐", "위조채권", "위조은행권", "원화표시여행자수표", "여행자수표", "실물증권", "자기앞수표", "당좌수표", "우편환", "귀금속", "골드바", "총기", "도검", "화약", "무기", "폭발물", "유독성물질" # 이들은 모두 ITEM_GUIDE_MAP에 더 상세히 정의되어 있으므로 제거
]))

# 허용물품 리스트
ALLOWED_ITEMS = list(set([
    "옷", "종이", "케이블", "책", "휴대폰", 
    "충전기", "이어폰", "손목시계", "안경", "선글라스", "물티슈", "휴지", "칫솔", "볼펜", "연필", "노트", "공책", 
    "파우치", "마스크", "비누", "수건", "물병", "우산", "샌들", "운동화", "슬리퍼", "모자", "지갑", "카드지갑", 
    "열쇠", "베개", "담요", "목베개", "에코백", "종이봉투", "비닐봉지", "과자", "사탕", "초콜릿", "비타민", "약통", 
    "쿠션", "손거울", "빗", "헤어밴드", "헤어핀", "안대", "베개", "목베개", "귀마개", "파우더", "아이섀도우", "블러셔", 
    "립스틱", "립밤", "고체향수", "고체비누", "쿠션", "고체파운데이션", "브로우펜슬", "아이라이너펜슬", "마스카라", 
    "메이크업스펀지", "거울", "뷰러", "햇반", "즉석밥", "라면", "삶은달걀", "소금", "프라이팬", "냄비", "전기밥솥", 
    "레고", "블록", "양말", "브라우니", "캔디",
]))

# 금지/허용 물품 확인 함수
def check_item_list(item: str):
    if item in ITEM_GUIDE_MAP:
        return True, f"⛔️ 경고: '{item}'은(는) 기내 수하물로 반입이 제한됩니다.\n{ITEM_GUIDE_MAP[item]}", "[판단 근거] 특정 물품에 대한 상세 규정 확인됨."
    
    elif item in PROHIBITED_ITEMS:
            return True, f"⛔️ 경고: '{item}'은(는) 기내 수하물로 반입이 불가능합니다.", "[판단 근거] 금지물품 목록에 등록된 물품입니다."
        
    elif item in ALLOWED_ITEMS:
        return False, f"✅ 안내: '{item}'은(는) 기내 수하물로 반입이 가능합니다.", "[판단 근거] 허용물품 목록에 등록된 물품입니다."

    return None, None, None

def main():
    print("수하물 검사 프로그램에 오신 것을 환영합니다!\n")
    print("물품 검사를 시작합니다. (종료하려면 '종료' 입력)")
    while True:
        try:
            item = input("\n검사할 물품 이름을 입력하세요: ").strip()
            if item == "종료":
                print("\n프로그램을 종료합니다.")
                break
            if not item:  # 빈 입력 처리
                print("물품 이름을 입력해주세요.")
                continue

            # 1. 먼저 정의된 딕셔너리 및 리스트에서 확인
            is_prohibited, message, reason = check_item_list(item)
            
            if is_prohibited is not None:
                print(f"\n{message}")
                print(reason)
            else:
                print("AI 분석 중... 잠시만 기다려주세요.")
                is_prohibited, ai_result = analyze_text_with_ai(item)

                print(f"{ai_result}")

        except Exception as e:
            print(f"오류가 발생했습니다: {e}\n")
            continue

def analyze_text_with_ai(text: str):

    prompt = f"""
You are a professional airline baggage inspector and aviation safety expert.

Evaluate whether the following item can be brought in carry-on baggage on an international flight, based strictly on IATA rules and aviation safety principles.

⚠️ VERY IMPORTANT INSTRUCTIONS:

1. Be **strict and conservative**. If there is **any possibility** that the item might be prohibited, you must consider it **prohibited**.
2. In that case, start your Korean response with: ⛔️ 경고:
3. Only if you are **completely certain** that the item is allowed on all international flights as carry-on baggage, you may use: ✅ 안내:
4. You must output the final answer in **Korean only**, including the warning/guidance icon.
5. Your answer should be clear, natural Korean for a typical airline passenger.

Item to evaluate: "{text}"
    """

    try:
        ENDPOINT = "https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent"
        params = {"key": API_KEY}
    
        data = {
            "contents": [
                {
                    "role": "user",
                    "parts": [{"text": prompt}]
                }
            ]
        }

        response = requests.post(ENDPOINT, json=data, params=params)
        response.raise_for_status()
        result = response.json()

        try:
            ai_response = result['candidates'][0]['content']['parts'][0]['text']
            is_prohibited = ai_response.startswith('⛔️ 경고:')
            return is_prohibited, ai_response
        except (KeyError, IndexError):
            return False, "AI 응답을 파싱하는 데 실패했습니다."
       
    except Exception as e:
        return False, f"AI 분석 중 오류 발생: {e}"
    
if __name__ == "__main__":
    main()