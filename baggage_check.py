import requests

# OpenRouter API 정보
URL = "https://openrouter.ai/api/v1/chat/completions"
HEADERS = {
    "Authorization": "Bearer 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",  # 새 API 키 적용
    "Content-Type": "application/json"
}

# 금지물품 리스트
PROHIBITED_ITEMS = [
    "물총", "가위", "칼", "스위스 군용칼", "총", "화약", "폭발물", "화학약품", "염산", "과산화수소", "아세톤", "벤젠",
    "가스레인지", "라이터", "성냥", "스프레이", "압축가스", "위조화폐", "위조채권", "위조은행권", "원화표시여행자수표", 
    "여행자수표", "실물증권", "자기앞수표", "당좌수표", "우편환", "귀금속", "골드바", "총기", "도검", "화약", "무기", 
    "폭발물", "유독성물질", "폭죽", "식칼", "식도", "과도", "나이프", "칼", "커터칼", "눈썹칼", "맥가이버칼", "스위스칼", 
    "공구", "망치", "렌치", "가위", "면도기", "마약", "멸종위기종", "야생동물", "호랑이", "표범", "코끼리", "타조", "매", 
    "올빼미", "코브라", "거북", "악어", "철갑상어", "산호", "난", "선인장", "알로에", "박제", "모피", "모피핸드백", 
    "모피가방", "모피지갑", "상아", "상아팔찌", "상아목걸이", "동물한약", "웅담", "사향", "식물한약", "목향", "구척", 
    "천마", "식물", "과일", "채소", "야채", "농림산물류", "문화재", "문화유산", "유형문화유산", "물", "액체", "세면용품", 
    "치약", "샴푸", "물약", "약", "술", "약주", "음료수", "로션", "핸드크림", "토너", "파운데이션", "스킨", "에센스", 
    "세럼", "수분크림", "선크림", "메이크업베이스", "립글로스", "립오일", "컨실러", "BB크림", "CC크림", "미스트", 
    "메이크업픽서", "클렌징오일", "클렌징밤", "클렌징폼", "세안제", "클렌징워터", "리무버", "네일리무버", "매니큐어", "퍼퓸", 
    "향수", "헤어에센스", "스프레이", "헤어스프레이", "산소스프레이", "해충기피제", "호신용스프레이", "에프킬라", "살충제", 
    "고추장", "김치", "음식물", "아이스팩", "대형라이터", "전기라이터", "토치"
]

# 허용물품 리스트
ALLOWED_ITEMS = [
    "리튬이온배터리", "보조배터리", "배터리", "밧데리", "라이터", "성냥", "컴퓨터", "데스크탑", "노트북", "랩탑", "태블릿", 
    "폰", "스마트폰", "핸드폰", "스마트워치", "애플워치", "아이패드", "카메라", "캠코더", "웨어러블", "고데기", "매직기", 
    "전자담배", "등산용스틱", "등산스틱", "삼각대", "셀카봉", "트라이포드", "옷", "종이", "케이블", "책", "휴대폰", 
    "충전기", "이어폰", "손목시계", "안경", "선글라스", "물티슈", "휴지", "칫솔", "볼펜", "연필", "노트", "공책", 
    "파우치", "마스크", "비누", "수건", "물병", "우산", "샌들", "운동화", "슬리퍼", "모자", "지갑", "카드지갑", 
    "열쇠", "베개", "담요", "목베개", "에코백", "종이봉투", "비닐봉지", "과자", "사탕", "초콜릿", "비타민", "약통", 
    "쿠션", "손거울", "빗", "헤어밴드", "헤어핀", "안대", "베개", "목베개", "귀마개", "파우더", "아이섀도우", "블러셔", 
    "립스틱", "립밤", "고체향수", "고체비누", "쿠션", "고체파운데이션", "브로우펜슬", "아이라이너펜슬", "마스카라", 
    "메이크업스펀지", "거울", "뷰러", "햇반", "즉석밥", "라면", "삶은달걀", "소금", "프라이팬", "냄비", "전기밥솥", 
    "레고", "블록", "양말", "브라우니", "캔디", "아이폰"
]

# OpenRouter API로 텍스트 분석
def analyze_text_with_ai(text: str):
    prompt = f"""
    당신은 항공서비스 분야의 전문가이자 수하물 검사관입니다.\n아래는 항공기 기내 반입 금지 물품 목록입니다:\n{', '.join(PROHIBITED_ITEMS)}\n아래는 항공기 기내 반입 허용 물품 목록입니다:\n{', '.join(ALLOWED_ITEMS)}\n\n아래의 물품이 금지물품에 해당하는지, 그리고 그 이유와 관련 규정(국제항공운송협회, IATA 기준 등)을 한국어로 공식적이고 친절하게 설명해 주세요.\n물품: {text}
    """
    data = {
        "model": "meta-llama/llama-3.3-8b-instruct:free",
        "messages": [
            {"role": "user", "content": prompt}
        ]
    }
    try:
        response = requests.post(URL, headers=HEADERS, json=data)
        response.raise_for_status()
        result = response.json()
        return result["choices"][0]["message"]["content"]
    except Exception as e:
        return f"AI 분석 중 오류 발생: {e}"

def main():
    print("수하물 검사 프로그램에 오신 것을 환영합니다!\n")
    while True:
        print("1. 텍스트로 물품 검사")
        print("2. 금지물품 목록 보기")
        print("3. 종료")
        choice = input("\n원하는 기능을 선택하세요 (1-3): ")
        if choice == "1":
            item = input("검사할 물품 이름을 입력하세요: ")
            print("AI 분석 중... 잠시만 기다려주세요.")
            result = analyze_text_with_ai(item)
            print(f"\n분석 결과: {result}\n")
        elif choice == "2":
            print("\n[금지물품 목록]")
            for item in PROHIBITED_ITEMS:
                print(f"- {item}")
            print()
        elif choice == "3":
            print("프로그램을 종료합니다.")
            break
        else:
            print("잘못된 입력입니다. 다시 선택해주세요.\n")

if __name__ == "__main__":
    main() 